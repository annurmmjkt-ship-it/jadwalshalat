<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Masjid Digital HYBRID 2.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#0b2a4a;color:white;}
.brand{text-align:center;padding-top:12px;color:#ffd700;font-weight:bold;font-size:19px;line-height:1.2;}
.header{text-align:center;margin-top:8px;font-size:17px;font-weight:bold;color:#ffd700;}
#tanggal{margin-top:6px;font-size:14px;color:white;}
#hijriyah{font-size:13px;color:#00ffcc;margin-top:2px;}

.container{display:flex;flex-direction:column;padding:8px 15px 70px 15px;}
.left{width:100%;}

.sholat{
display:flex;
justify-content:space-between;
align-items:center;
font-size:18px;
padding:10px 5px;
border-bottom:1px solid rgba(255,255,255,0.25);
}

.link-info{
text-align:center;
margin-top:15px;
font-size:15px;
color:#ffd700;
font-weight:bold;
}

.right{text-align:center;margin-top:18px;}
.jam{font-size:42px;font-weight:bold;color:#ffd700;}
.countdown{margin-top:6px;font-size:14px;color:#00ffcc;}

.qris-box{margin-top:15px;text-align:center;}
.qris-img{width:180px;max-width:80%;border-radius:8px;background:white;padding:5px;}

.running{
position:fixed;bottom:0;width:100%;background:black;height:36px;
display:flex;align-items:center;overflow:hidden;
}
.track{
white-space:nowrap;padding-left:100%;
animation:jalan 30s linear infinite;font-size:13px;color:#00ffcc;
}
@keyframes jalan{0%{transform:translateX(0);}100%{transform:translateX(-100%);}}

.overlay{
position:fixed;top:0;left:0;width:100%;height:100vh;
background:black;color:white;display:flex;
flex-direction:column;justify-content:center;align-items:center;
z-index:9999;text-align:center;display:none;
}

@media (min-width:1024px){
body{overflow:hidden;}
.brand{position:fixed;top:15px;left:25px;text-align:left;font-size:32px;}
.header{padding:20px;font-size:26px;}
#tanggal{font-size:18px;}
#hijriyah{font-size:16px;}
.container{flex-direction:row;height:60vh;padding:30px 60px;}
.left{flex:1;display:flex;flex-direction:column;justify-content:center;}
.right{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;}
.sholat{font-size:33px;}
.link-info{font-size:22px;margin-top:25px;}
.jam{font-size:80px;}
.countdown{font-size:20px;}
.qris-img{width:250px;}
.running{height:45px;}
.track{font-size:25px;animation:jalan 50s linear infinite;}
}
</style>
</head>

<body>

<div id="overlay" class="overlay"></div>

<div class="brand">
Masjid An Nur<br>Menara Mandiri
</div>

<div class="header">
JADWAL SHALAT
<div id="tanggal"></div>
<div id="hijriyah"></div>
</div>

<div class="container">

<div class="left">
<div class="sholat">Imsak <span id="Imsak">--</span></div>
<div class="sholat">Subuh <span id="Subuh">--</span></div>
<div class="sholat">Dzuhur <span id="Dzuhur">--</span></div>
<div class="sholat">Ashar <span id="Ashar">--</span></div>
<div class="sholat">Maghrib <span id="Maghrib">--</span></div>
<div class="sholat">Isya <span id="Isya">--</span></div>

<div class="link-info">
www.bit.ly/jadwalmandiri
</div>
</div>

<div class="right">
<div class="jam" id="jam">00:00:00</div>
<div class="countdown" id="countdown"></div>

<div class="qris-box">
<img src="qris.png" class="qris-img">
</div>
</div>

</div>

<div class="running">
<div class="track">
ðŸ•Œ Masjid An Nur Menara Mandiri Jakarta â€¢ Luruskan dan rapatkan shaf â€¢ Matikan HP saat shalat â€¢ Salurkan Infaq & Shodaqoh melalui QRIS atau Rekening Bank Mandiri 1020030005000 â€¢ Jamaah dapat langsung mengakses jadwal shalat secara online dari HP masing2 di web www.bit.ly/jadwalmandiri
</div>
</div>

<script>

/* ================= TANGGAL ================= */
tanggal.textContent=new Date().toLocaleDateString(
'id-ID',{weekday:'long',day:'numeric',month:'long',year:'numeric'}
);

/* ================= RAMADHAN OFFLINE ================= */
const ramadhanStart=new Date(2026,1,19);
const ramadhanEnd=new Date(2026,2,20);

const ramadhanData=[
["04:31","04:41","12:10","15:20","18:18","19:28"],
["04:32","04:42","12:10","15:19","18:18","19:28"],
["04:32","04:42","12:10","15:19","18:17","19:27"],
["04:32","04:42","12:10","15:18","18:17","19:27"],
["04:32","04:42","12:10","15:17","18:17","19:26"],
["04:32","04:42","12:09","15:16","18:17","19:26"],
["04:32","04:42","12:09","15:15","18:16","19:26"],
["04:32","04:42","12:09","15:15","18:16","19:25"],
["04:33","04:43","12:09","15:14","18:16","19:25"],
["04:33","04:43","12:09","15:13","18:15","19:24"],
["04:33","04:43","12:09","15:12","18:15","19:24"],
["04:33","04:43","12:08","15:11","18:14","19:24"],
["04:33","04:43","12:08","15:10","18:14","19:23"],
["04:33","04:43","12:08","15:09","18:14","19:23"],
["04:33","04:43","12:08","15:08","18:13","19:22"],
["04:33","04:43","12:07","15:08","18:13","19:22"],
["04:33","04:43","12:07","15:09","18:12","19:21"],
["04:33","04:43","12:07","15:09","18:12","19:21"],
["04:33","04:43","12:07","15:10","18:12","19:20"],
["04:33","04:43","12:06","15:10","18:11","19:20"],
["04:33","04:43","12:06","15:10","18:11","19:19"],
["04:33","04:43","12:06","15:11","18:10","19:19"],
["04:33","04:43","12:06","15:11","18:10","19:18"],
["04:33","04:43","12:05","15:11","18:09","19:18"],
["04:33","04:43","12:05","15:12","18:09","19:17"],
["04:33","04:43","12:05","15:12","18:09","19:17"],
["04:32","04:42","12:05","15:12","18:08","19:16"],
["04:32","04:42","12:04","15:12","18:08","19:16"],
["04:32","04:42","12:04","15:13","18:07","19:16"],
["04:32","04:42","12:04","15:13","18:07","19:15"]
];

/* ================= API KEMENAG ================= */
async function pakaiKemenag(){
try{
const d=new Date();
const tahun=d.getFullYear();
const bulan=String(d.getMonth()+1).padStart(2,'0');
const tanggalNow=String(d.getDate()).padStart(2,'0');
const kota="1301";

const res=await fetch(`https://api.myquran.com/v2/sholat/jadwal/${kota}/${tahun}/${bulan}/${tanggalNow}`);
const json=await res.json();
const t=json.data.jadwal;

Imsak.textContent=t.imsak;
Subuh.textContent=t.subuh;
Dzuhur.textContent=t.dzuhur;
Ashar.textContent=t.ashar;
Maghrib.textContent=t.maghrib;
Isya.textContent=t.isya;

hijriyah.textContent=t.tanggal_hijriyah;
}catch{}
}

/* ================= CEK HYBRID ================= */
function cekHybrid(){
const today=new Date();
if(today>=ramadhanStart && today<=ramadhanEnd){
let diff=Math.floor((today-ramadhanStart)/(1000*60*60*24));
let d=ramadhanData[diff];
Imsak.textContent=d[0];
Subuh.textContent=d[1];
Dzuhur.textContent=d[2];
Ashar.textContent=d[3];
Maghrib.textContent=d[4];
Isya.textContent=d[5];
hijriyah.textContent=(diff+1)+" Ramadhan 1447 H";
}else{
pakaiKemenag();
}
}
cekHybrid();
setInterval(cekHybrid,3600000);

/* ================= JAM ================= */
function updateJam(){
const n=new Date();
jam.textContent=
String(n.getHours()).padStart(2,'0')+":"+
String(n.getMinutes()).padStart(2,'0')+":"+
String(n.getSeconds()).padStart(2,'0');
}
setInterval(updateJam,1000);
updateJam();

/* ================= AZAN + IQOMAH ================= */
const durasiAzan=180;
const durasiIqomah=600;

function kontrolShalat(){
const now=new Date();
const waktu=["Subuh","Dzuhur","Ashar","Maghrib","Isya"];

for(let w of waktu){
let val=document.getElementById(w).innerText;
if(!val.includes(":"))continue;

let [j,m]=val.split(":");
let target=new Date();
target.setHours(j,m,0,0);

let selisih=(now-target)/1000;

if(selisih>=0 && selisih<durasiAzan){
overlay.style.display="flex";
overlay.innerHTML=
`<div style="font-size:60px;">AZAN WAKTU SHALAT ${w.toUpperCase()}</div>
<div style="font-size:150px;margin-top:20px;">${val}</div>`;
return;
}

if(selisih>=durasiAzan && selisih<(durasiAzan+durasiIqomah)){
let sisa=(durasiAzan+durasiIqomah)-selisih;
let mm=Math.floor(sisa/60);
let ss=Math.floor(sisa%60);
overlay.style.display="flex";
overlay.innerHTML=
`<div style="font-size:80px;">IQOMAH ${w.toUpperCase()}</div>
<div style="font-size:170px;color:red;font-weight:bold;">
${String(mm).padStart(2,'0')}:${String(ss).padStart(2,'0')}
</div>`;
return;
}
}

overlay.style.display="none";
}
setInterval(kontrolShalat,1000);

/* ================= COUNTDOWN 2 JAM ================= */
function updateCountdown(){
if(overlay.style.display==="flex"){countdown.textContent="";return;}
const now=new Date();
const waktu=["Subuh","Dzuhur","Ashar","Maghrib","Isya"];
let next=null,name="";
for(let w of waktu){
let val=document.getElementById(w).innerText;
if(!val.includes(":"))continue;
let [j,m]=val.split(":");
let target=new Date();
target.setHours(j,m,0,0);
if(target>now){next=target;name=w;break;}
}
if(!next){
let val=document.getElementById("Subuh").innerText;
let [j,m]=val.split(":");
next=new Date();
next.setDate(now.getDate()+1);
next.setHours(j,m,0,0);
name="Subuh";
}
let diff=(next-now)/1000;
if(diff<=7200 && diff>0){
let hh=Math.floor(diff/3600);
let mm=Math.floor((diff%3600)/60);
let ss=Math.floor(diff%60);
countdown.textContent="Menuju "+name+" : "+
String(hh).padStart(2,'0')+":"+
String(mm).padStart(2,'0')+":"+
String(ss).padStart(2,'0');
}else{countdown.textContent="";}
}
setInterval(updateCountdown,1000);
updateCountdown();

/* ================= AUTO RELOAD ================= */
setInterval(()=>{
let n=new Date();
if(n.getHours()==0 && n.getMinutes()==0){location.reload();}
},60000);

</script>

</body>
</html>